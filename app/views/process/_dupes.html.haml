.columns{style: (@dupes.any? ? 'border-bottom: 1px dashed silver' : '')}
  .column
    = thumbnail_tag ProcessArchiveDecompressJob.cover_path(@dname, @info), title: 'current cover'
  
  .column.is-10
    .name_orig.mb-1
      %span.icon.in-text-small.mr-2
        %i.mi.mi-small(title="original filename") photo_filter
      = @fname

    .dest-filename.mb-1
      = form_with url: set_property_process_path do |f|
        = f.hidden_field :tab, value: params[:tab]
        %span.icon.in-text-small.mr-2
          %i.mi.mi-small(title="terms for catalog search") search
        = f.text_field :dupe_search, value: @info[:dupe_search], placeholder: 'search terms in sequence',
          class: 'input is-small', style: 'width: 40rem',
          data: { orig_name: @info[:relative_path].tokenize_doujin_filename.join(' ') }
        = f.button class: 'button is-small' do
          %span.icon
            %i.mi.mi-small send
        = f.button class: 'button is-small',
          onclick: %Q|$('#dupe_search').val($('#dupe_search').data('orig-name')); return false;| do
          %span.icon
            %i.mi.mi-small(title="restore initial search term") restore

    - if @dupes.any?
      .tags.has-addons.mt-3
        %span.tag.is-info= "this file: #{@cur_info}"
        %span.tag.is-danger= "#{@dupes.size} potential duplicate/s found in collection"
    - else
      %span.tag.mt-3.is-success= "NO duplicates found in collection"
    
    .tags.has-addons.mt-3
      %span.tag.is-info= "cover matching status: "
      %span.tag.is-link= @info[:cover_status]
      - if @info[:cover_status] != :completed
        = link_to('refresh', {tab: :dupes}, class: :tag)
      - else
        = link_to('restart', {tab: :dupes, rematch_cover: true}, class: :tag)

- @dupes.each_slice(2) do |s|
  .columns
    - s.each do |d|
      .column.is-2= image_tag doujin_path(d, format: :webp)
      .column
        .info
          .tags.has-addons
            %span.tag.is-info= "#{d.num_images} pics/#{number_to_human_size d.size}"
            - if d.cover_similarity
              %span.tag.is-warning= "#{'%2d' % d.cover_similarity}% cover similarity"
        .now(title="collection path" style="border-bottom: 1px solid silver")= link_to "##{d.id} @ #{d.file_path}", doujin_path(d), target: :_blank
        .was(title="original name")= d.name_orig
